<?php

use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_form_FORM_ID_alter().
 *
 * Gets document type from query string.
 * Gets term id from taxonomy and sets default Document Type on form.
 *
 */
function ldbase_handlers_form_webform_submission_create_update_document_add_form_alter(&$form, FormStateInterface $form_state, $form_id) {

  $doc_type = \Drupal::request()->query->get('document-type');

  if ($doc_type) {
    $tid = '';
    $vocabulary = 'document_type';

    $term = \Drupal::entityTypeManager()
      ->getStorage('taxonomy_term')
      ->loadByProperties(['name' => $doc_type, 'vid' => $vocabulary]);
    $term = reset($term);
    $tid = $term->id();

    $form['elements']['document_type']['#default_value'] = $tid;
  }

}
